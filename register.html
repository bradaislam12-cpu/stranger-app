<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title class="tr" data-key="register">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ | SM</title>
    <link rel="stylesheet" href="style.css">
    <style>
        select { width: 100%; padding: 12px; border-radius: 10px; margin-bottom: 15px; background: var(--card); color: var(--txt); border: 1px solid #ddd; font-size: 0.9rem; }
        optgroup { font-weight: bold; color: var(--p); background: var(--bg); }
        .auth-box { max-width: 450px; margin: 20px auto; padding: 25px; }
    </style>
</head>
<body class="light-mode">

    <div class="auth-box">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 class="tr" data-key="register" style="margin: 0;">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h2>
            <button onclick="toggleLang()" id="langBtn" style="width: 40px; height: 40px; border-radius: 50%; padding: 0; font-size: 0.8rem; background: var(--p); color: white; border: none; cursor: pointer;">EN</button>
        </div>
        
        <input type="text" id="fullname" class="tr" data-key="fullname" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
        <input type="email" id="email" class="tr" data-key="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯">
        <input type="password" id="pass" class="tr" data-key="pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <input type="number" id="age" class="tr" data-key="age" placeholder="Ø§Ù„Ø¹Ù…Ø±">

        <label class="tr" data-key="country" style="display:block; margin-bottom:5px; font-size:0.8rem;">Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
        <select id="country">
            <option value="" class="tr" data-key="select">Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©...</option>
            <optgroup label="ğŸŒ Africa">
                <option value="algeria" class="tr" data-key="algeria">Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</option>
                <option value="egypt" class="tr" data-key="egypt">Ù…ØµØ±</option>
                <option value="morocco" class="tr" data-key="morocco">Ø§Ù„Ù…ØºØ±Ø¨</option>
                <option value="tunisia" class="tr" data-key="tunisia">ØªÙˆÙ†Ø³</option>
                <option value="libya" class="tr" data-key="libya">Ù„ÙŠØ¨ÙŠØ§</option>
                <option value="nigeria" class="tr" data-key="nigeria">Ù†ÙŠØ¬ÙŠØ±ÙŠØ§</option>
                <option value="safrica" class="tr" data-key="safrica">Ø¬Ù†ÙˆØ¨ Ø£ÙØ±ÙŠÙ‚ÙŠØ§</option>
            </optgroup>
            <optgroup label="ğŸŒ Asia">
                <option value="saudi" class="tr" data-key="saudi">Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option>
                <option value="uae" class="tr" data-key="uae">Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</option>
                <option value="qatar" class="tr" data-key="qatar">Ù‚Ø·Ø±</option>
                <option value="iraq" class="tr" data-key="iraq">Ø§Ù„Ø¹Ø±Ø§Ù‚</option>
                <option value="kuwait" class="tr" data-key="kuwait">Ø§Ù„ÙƒÙˆÙŠØª</option>
                <option value="turkey" class="tr" data-key="turkey">ØªØ±ÙƒÙŠØ§</option>
            </optgroup>
            <optgroup label="ğŸŒ Europe">
                <option value="france" class="tr" data-key="france">ÙØ±Ù†Ø³Ø§</option>
                <option value="germany" class="tr" data-key="germany">Ø£Ù„Ù…Ø§Ù†ÙŠØ§</option>
                <option value="uk" class="tr" data-key="uk">Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©</option>
                <option value="russia" class="tr" data-key="russia">Ø±ÙˆØ³ÙŠØ§</option>
            </optgroup>
            <optgroup label="ğŸŒ Americas">
                <option value="usa" class="tr" data-key="usa">Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©</option>
                <option value="canada" class="tr" data-key="canada">ÙƒÙ†Ø¯Ø§</option>
                <option value="brazil" class="tr" data-key="brazil">Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„</option>
            </optgroup>
        </select>

        <label class="tr" data-key="interests" style="display:block; margin-bottom:5px; font-size:0.8rem;">Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª</label>
        <select id="interest">
            <option value="" class="tr" data-key="select">Ø§Ø®ØªØ± Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…...</option>
            <optgroup label="ğŸ§‘â€ğŸ“ Education">
                <option value="reading" class="tr" data-key="reading">Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</option>
                <option value="languages" class="tr" data-key="languages">Ø§Ù„Ù„ØºØ§Øª</option>
                <option value="science" class="tr" data-key="science">Ø§Ù„Ø¹Ù„ÙˆÙ…</option>
            </optgroup>
            <optgroup label="ğŸ¨ Creativity">
                <option value="drawing" class="tr" data-key="drawing">Ø§Ù„Ø±Ø³Ù…</option>
                <option value="music" class="tr" data-key="music">Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰</option>
                <option value="movies" class="tr" data-key="movies">Ø§Ù„Ø£ÙÙ„Ø§Ù…</option>
            </optgroup>
            <optgroup label="âš½ Sports">
                <option value="football" class="tr" data-key="football">ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…</option>
                <option value="esports" class="tr" data-key="esports">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</option>
                <option value="fitness" class="tr" data-key="fitness">Ù„ÙŠØ§Ù‚Ø©</option>
            </optgroup>
            <optgroup label="ğŸ’» Technology">
                <option value="coding" class="tr" data-key="coding">Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©</option>
                <option value="ai" class="tr" data-key="ai">Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</option>
                <option value="games" class="tr" data-key="games">Ø£Ù„Ø¹Ø§Ø¨</option>
            </optgroup>
            <optgroup label="â¤ï¸ Personal">
                <option value="cooking" class="tr" data-key="cooking">Ø§Ù„Ø·Ø¨Ø®</option>
                <option value="travel" class="tr" data-key="travel">Ø§Ù„Ø³ÙØ±</option>
            </optgroup>
        </select>

        <button id="regBtn" class="tr" data-key="register" style="width: 100%; margin-top: 10px; padding: 15px;">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
        <p style="margin-top: 15px;"><span class="tr" data-key="haveAccount">Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ</span> <a href="login.html" class="tr" data-key="login" style="color: var(--p); font-weight: bold;">Ø¯Ø®ÙˆÙ„</a></p>
        <button onclick="toggleTheme()" class="icon-btn" style="display:block; margin: 10px auto;">ğŸŒ“</button>
    </div>

    <script src="ui-logic.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = { 
            apiKey: "AIzaSyAMA4owgSvA_sBh2syHOnRTS5fhnW1JIeg", 
            authDomain: "strangermeeting-91226.firebaseapp.com", 
            projectId: "strangermeeting-91226", 
            storageBucket: "strangermeeting-91226.firebasestorage.app", 
            messagingSenderId: "575547116212", 
            appId: "1:575547116212:web:333a4732abf59903e7e5e1" 
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        document.getElementById("regBtn").onclick = async () => {
            const name = document.getElementById("fullname").value.trim();
            const email = document.getElementById("email").value.trim();
            const pass = document.getElementById("pass").value;
            const age = document.getElementById("age").value;
            const country = document.getElementById("country").value;
            const interest = document.getElementById("interest").value;

            if(!name || !email || !pass || !age || !country || !interest) return alert("ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ ÙƒØ§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");

            const btn = document.getElementById("regBtn");
            btn.innerText = "...";
            btn.disabled = true;

            try {
                const res = await createUserWithEmailAndPassword(auth, email, pass);
                await setDoc(doc(db, "users", res.user.uid), {
                    fullname: name, email, age, country, interest, uid: res.user.uid
                });
                location.href = "dashboard.html";
            } catch (e) { alert(e.message); btn.innerText = "Error"; btn.disabled = false; }
        };
    </script>
</body>
</html>
