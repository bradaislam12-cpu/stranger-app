<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ | SM</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="light-mode">

    <div class="auth-box">
        <h2 class="tr" data-key="register">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h2>
        
        <input type="text" id="fullname" class="tr" data-key="fullname" placeholder="Ø§Ù„Ø§Ø³Ù…">
        <input type="email" id="email" class="tr" data-key="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯">
        <input type="password" id="pass" class="tr" data-key="pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">

        <label class="tr" data-key="country">Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
        <select id="country">
            <option value="" class="tr" data-key="select">Ø§Ø®ØªØ±...</option>
            <option value="egypt" class="tr" data-key="egypt">Ù…ØµØ±</option>
            <option value="saudi" class="tr" data-key="saudi">Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option>
            <option value="algeria" class="tr" data-key="algeria">Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</option>
            <option value="Iraq" class="tr" data-key="Iraq">Ø§Ù„Ø¹Ø±Ø§Ù‚</option>
        </select>

        <label class="tr" data-key="interests">Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
        <select id="interest">
            <option value="" class="tr" data-key="select">Ø§Ø®ØªØ±...</option>
            <option value="tech" class="tr" data-key="tech">ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</option>
            <option value="gaming" class="tr" data-key="gaming">Ø£Ù„Ø¹Ø§Ø¨</option>
            <option value="sports" class="tr" data-key="sports">Ø±ÙŠØ§Ø¶Ø©</option>
            <option value="coding" class="tr" data-key="coding">Ø¨Ø±Ù…Ø¬Ø©</option>
        </select>

        <button id="regBtn" class="tr" data-key="register" style="width: 100%; margin-top: 20px;">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
        
        <div style="margin-top: 15px;">
            <button onclick="toggleLang()">ğŸŒ Change Language</button>
            <button onclick="toggleTheme()">ğŸŒ“</button>
        </div>
    </div>

    <script src="ui-logic.js"></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = { 
            apiKey: "AIzaSyAMA4owgSvA_sBh2syHOnRTS5fhnW1JIeg", 
            authDomain: "strangermeeting-91226.firebaseapp.com", 
            projectId: "strangermeeting-91226", 
            storageBucket: "strangermeeting-91226.firebasestorage.app", 
            messagingSenderId: "575547116212", 
            appId: "1:575547116212:web:333a4732abf59903e7e5e1" 
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        document.getElementById("regBtn").onclick = async () => {
            const name = document.getElementById("fullname").value;
            const email = document.getElementById("email").value;
            const pass = document.getElementById("pass").value;
            const country = document.getElementById("country").value;
            const interest = document.getElementById("interest").value;

            if(!name || !email || !pass || !country || !interest) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");

            try {
                const res = await createUserWithEmailAndPassword(auth, email, pass);
                await setDoc(doc(db, "users", res.user.uid), {
                    fullname: name,
                    email: email,
                    country: country,
                    interest: interest,
                    uid: res.user.uid
                });
                location.href = "dashboard.html";
            } catch (e) { alert(e.message); }
        };
    </script>
</body>
</html>
