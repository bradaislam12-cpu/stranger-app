<!DOCTYPE html>
<html lang="ar" dir="rtl" id="mainHtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stranger Meeting | Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„... ğŸš€</title>
    <style>
        /* ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ ÙˆØ§Ù„Ù„ÙŠÙ„ÙŠ */
        :root { --bg: #f0f2f5; --text: #4CAF50; }
        [data-theme="dark"] { --bg: #121212; --text: #00a884; }

        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: var(--bg);
            font-family: sans-serif;
            transition: 0.3s;
        }
        .loader-text {
            font-size: 1.2rem;
            color: var(--text);
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="loader-text" id="loadTxt">Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù„Ù‚Ø§Ø¡... ğŸš€</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = { 
            apiKey: "AIzaSyAMA4owgSvA_sBh2syHOnRTS5fhnW1JIeg", 
            authDomain: "strangermeeting-91226.firebaseapp.com", 
            projectId: "strangermeeting-91226", 
            storageBucket: "strangermeeting-91226.firebasestorage.app", 
            messagingSenderId: "575547116212", 
            appId: "1:575547116212:web:333a4732abf59903e7e5e1" 
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // --- ÙˆØ¸ÙŠÙØ© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ ÙˆØ§Ù„Ù„ØºØ© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ---
        function applySettings() {
            const savedTheme = localStorage.getItem("theme") || "light";
            const savedLang = localStorage.getItem("lang") || "ar";
            
            document.documentElement.setAttribute("data-theme", savedTheme);
            
            if(savedLang === 'en') {
                document.getElementById("mainHtml").dir = 'ltr';
                document.getElementById("loadTxt").innerText = "Preparing the meeting... ğŸš€";
            }
        }
        applySettings();
        // -------------------------------------------

        onAuthStateChanged(auth, (user) => {
            setTimeout(() => { // ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ø¬Ø¯Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ø±Ø¤ÙŠØ© ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                if (user) {
                    window.location.href = "dashboard.html";
                } else {
                    window.location.href = "login.html";
                }
            }, 500);
        });
    </script>
</body>
</html>