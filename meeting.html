<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…ÙƒØ§Ù„Ù…Ø© ÙÙŠØ¯ÙŠÙˆ Ù…Ø¨Ø§Ø´Ø± | Stranger Meeting</title>
    <script src="https://meet.jit.si/external_api.js"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #000; overflow: hidden; }
        #video-container { width: 100%; height: 100%; }
        .overlay-bar { position: fixed; top: 0; width: 100%; padding: 10px; z-index: 1000; background: rgba(0,0,0,0.7); color: white; text-align: center; font-family: sans-serif; }
        .exit-btn { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 1000; background: #ff4757; color: white; padding: 10px 25px; border-radius: 20px; text-decoration: none; font-weight: bold; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <div class="overlay-bar" id="status">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±...</div>
    <button class="exit-btn" onclick="location.href='./dashboard.html'">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø© âŒ</button>
    <div id="video-container"></div>

    <script>
        const params = new URLSearchParams(window.location.search);
        // ØªÙˆÙ„ÙŠØ¯ Ø§Ø³Ù… ØºØ±ÙØ© ÙØ±ÙŠØ¯ ÙˆÙ…Ø¹Ù‚Ø¯ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¯Ø§Ø®Ù„ ÙˆØ¶Ù…Ø§Ù† Ø§Ù„Ø®ØµÙˆØµÙŠØ©
        const roomID = params.get('room') || "PublicRoom";
        const mode = params.get('mode') || "friend";
        
        document.getElementById("status").innerText = mode === 'stranger' ? "ğŸ•µï¸ Ù…Ø­Ø§Ø¯Ø«Ø© ØºØ±ÙŠØ¨ Ø¢Ù…Ù†Ø©" : "ğŸ”’ Ù…ÙƒØ§Ù„Ù…Ø© ØµØ¯ÙŠÙ‚";

        const domain = "meet.jit.si";
        const options = {
            // Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ø¯Ø¦Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù„Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ© Ù„ØªØ¬Ù†Ø¨ Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„ØºØ±Ù Ø§Ù„Ù…Ø­Ù…ÙŠØ©
            roomName: "vpaas-magic-cookie-888999" + roomID, 
            width: "100%",
            height: "100%",
            parentNode: document.querySelector('#video-container'),
            configOverwrite: { 
                prejoinPageEnabled: false,      // ØªØ®Ø·ÙŠ Ø´Ø§Ø´Ø© "Ø§Ù†Ø¶Ù… Ù„Ù„Ù…Ù„ØªÙ‚Ù‰"
                disableDeepLinking: true,       // Ù…Ù†Ø¹ Ø·Ù„Ø¨ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
                enableLobbyChat: false,         // ØªØ¹Ø·ÙŠÙ„ ØºØ±ÙØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
                startWithAudioMuted: false,     // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† ÙÙˆØ±Ø§Ù‹
                startWithVideoMuted: false,     // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙÙˆØ±Ø§Ù‹
                requireDisplayName: false       // Ø¹Ø¯Ù… Ø·Ù„Ø¨ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù…
            },
            interfaceConfigOverwrite: {
                TOOLBAR_BUTTONS: ['microphone', 'camera', 'hangup', 'tileview'],
                SHOW_JITSI_WATERMARK: false
            }
        };

        const api = new JitsiMeetExternalAPI(domain, options);

        // Ø¥Ø®ÙØ§Ø¡ Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø© ÙØ¹Ù„ÙŠØ§Ù‹
        api.addEventListener('videoConferenceJoined', () => {
            document.getElementById("status").style.display = 'none';
        });
    </script>
</body>
</html>
