<!DOCTYPE html>
<html lang="ar" dir="rtl" id="mainHtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ğŸ”‘ | Stranger Meeting</title>
    <style>
        :root { --bg: #f0f2f5; --card: #fff; --text: #333; --input-bg: #fff; }
        [data-theme="dark"] { --bg: #121212; --card: #1e1e1e; --text: #eee; --input-bg: #2a2a2a; }

        body { 
            font-family: 'Segoe UI', Tahoma, sans-serif; 
            background: var(--bg); 
            color: var(--text);
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            transition: 0.3s;
        }
        .card { 
            background: var(--card); 
            padding: 40px; 
            border-radius: 20px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); 
            width: 340px; 
            text-align: center; 
        }
        h2 { margin-bottom: 20px; }
        input { 
            width: 100%; 
            padding: 12px; 
            margin: 10px 0; 
            border: 1px solid #ddd; 
            border-radius: 10px; 
            box-sizing: border-box; 
            background: var(--input-bg);
            color: var(--text);
        }
        .btn-green { 
            width: 100%; 
            padding: 12px; 
            background: #4CAF50; 
            color: white; 
            border: none; 
            border-radius: 10px; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 16px;
        }
        .btn-google { 
            width: 100%; 
            padding: 10px; 
            background: var(--card); 
            border: 1px solid #ddd; 
            border-radius: 10px; 
            margin-top: 15px; 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 10px; 
            font-weight: bold;
            color: var(--text);
        }
        .controls {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .f-btn { 
            padding: 5px 10px; 
            border-radius: 15px; 
            border: 1px solid #ddd; 
            background: none; 
            color: var(--text); 
            cursor: pointer; 
            font-size: 12px; 
        }
        a { color: #2196F3; text-decoration: none; font-size: 14px; }
    </style>
</head>
<body>

<div class="card">
    <h2 id="loginTitle">Ø¯Ø®ÙˆÙ„ Ø§Ù„ØºØ±Ø¨Ø§Ø¡ ğŸ”‘</h2>
    <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ğŸ“§">
    <input type="password" id="pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ğŸ”’">
    <button class="btn-green" onclick="login()" id="loginBtn">Ø¯Ø®ÙˆÙ„ âœ…</button>
    
    <button class="btn-google" onclick="loginG()"> 
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" width="18"> 
        <span id="googleText">Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¬ÙˆØ¬Ù„ G</span>
    </button>
    
    <p><span id="noAcc">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ</span> <a href="register.html" id="regLink">Ø³Ø¬Ù„ Ù‡Ù†Ø§ âœ¨</a></p>

    <div class="controls">
        <button class="f-btn" onclick="toggleTheme()" id="themeBtn">ğŸŒ™</button>
        <button class="f-btn" onclick="toggleLang()" id="langBtn">English ğŸŒ</button>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    
    const firebaseConfig = { 
        apiKey: "AIzaSyAMA4owgSvA_sBh2syHOnRTS5fhnW1JIeg", 
        authDomain: "strangermeeting-91226.firebaseapp.com", 
        projectId: "strangermeeting-91226", 
        storageBucket: "strangermeeting-91226.firebasestorage.app", 
        messagingSenderId: "575547116212", 
        appId: "1:575547116212:web:333a4732abf59903e7e5e1" 
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Ø¯Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¹Ø§Ø¯ÙŠ
    window.login = () => {
        const email = document.getElementById('email').value;
        const pass = document.getElementById('pass').value;
        signInWithEmailAndPassword(auth, email, pass)
            .then(() => window.location.href="dashboard.html")
            .catch(() => alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª! âŒ"));
    };

    // Ø¯Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¬ÙˆØ¬Ù„
    window.loginG = () => {
        signInWithPopup(auth, new GoogleAuthProvider())
            .then(() => window.location.href="dashboard.html")
            .catch((err) => console.log(err));
    };

    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¸Ù‡Ø± ÙˆØ§Ù„Ù„ØºØ©
    window.toggleTheme = () => {
        let theme = localStorage.getItem("theme") === 'dark' ? 'light' : 'dark';
        localStorage.setItem("theme", theme);
        applySettings();
    };

    window.toggleLang = () => {
        let lang = localStorage.getItem("lang") === 'en' ? 'ar' : 'en';
        localStorage.setItem("lang", lang);
        applySettings();
    };

    function applySettings() {
        const lang = localStorage.getItem("lang") || 'ar';
        const theme = localStorage.getItem("theme") || 'light';
        
        document.documentElement.setAttribute("data-theme", theme);
        const html = document.getElementById("mainHtml");
        
        if(lang === 'en') {
            html.dir = 'ltr';
            document.getElementById("loginTitle").innerText = "Stranger Login ğŸ”‘";
            document.getElementById("email").placeholder = "Email Address ğŸ“§";
            document.getElementById("pass").placeholder = "Password ğŸ”’";
            document.getElementById("loginBtn").innerText = "Login âœ…";
            document.getElementById("googleText").innerText = "Continue with Google G";
            document.getElementById("noAcc").innerText = "Don't have an account?";
            document.getElementById("regLink").innerText = "Register here âœ¨";
            document.getElementById("langBtn").innerText = "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸŒ";
        } else {
            html.dir = 'rtl';
            document.getElementById("loginTitle").innerText = "Ø¯Ø®ÙˆÙ„ Ø§Ù„ØºØ±Ø¨Ø§Ø¡ ğŸ”‘";
            document.getElementById("email").placeholder = "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ğŸ“§";
            document.getElementById("pass").placeholder = "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ğŸ”’";
            document.getElementById("loginBtn").innerText = "Ø¯Ø®ÙˆÙ„ âœ…";
            document.getElementById("googleText").innerText = "Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¬ÙˆØ¬Ù„ G";
            document.getElementById("noAcc").innerText = "Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ";
            document.getElementById("regLink").innerText = "Ø³Ø¬Ù„ Ù‡Ù†Ø§ âœ¨";
            document.getElementById("langBtn").innerText = "English ğŸŒ";
        }
        document.getElementById("themeBtn").innerText = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
    }

    applySettings(); // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
</script>
</body>
</html>